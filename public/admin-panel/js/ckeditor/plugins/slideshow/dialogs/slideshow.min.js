function removeDomainFromUrl(f){return f.replace(/^https?:\/\/[^\/]+/i,"")}function var_dump(f,k){var l="";k||(k=0);var t,h="";for(t=0;t<k+1;t+=1)h+="    ";if("object"==typeof f){var n,r;for(n in f)f.hasOwnProperty(n)&&(r=f[n],"object"==typeof r?(l+=h+"'"+n+"' ...\n",l+=var_dump(r,k+1)):l+=h+"'"+n+"' \x3d\x3e \""+r+'"\n')}else l="\x3d\x3d\x3d\x3e"+f+"\x3c\x3d\x3d\x3d("+typeof f+")";return l}
var IMG_PARAM={URL:0,TITLE:1,ALT:2,WIDTH:3,HEIGHT:4},pluginPath=removeDomainFromUrl(CKEDITOR.plugins.get("slideshow").path),BASE_PATH=removeDomainFromUrl(CKEDITOR.basePath),SCRIPT_JQUERY=pluginPath+"3rdParty/jquery.min.js",SCRIPT_ADDGAL=pluginPath+"3rdParty/ad-gallery/jquery.ad-gallery.min.js",CSS_ADDGAL=pluginPath+"3rdParty/ad-gallery/jquery.ad-gallery.css",SCRIPT_FANCYBOX=pluginPath+"3rdParty/fancybox2/jquery.fancybox.pack.js?v\x3d2.1.5",CSS_FANCYBOX=pluginPath+"3rdParty/fancybox2/jquery.fancybox.css?v\x3d2.1.5",
listItem=function(f){return f.type==CKEDITOR.NODE_ELEMENT&&f.is("li")},ULItem=function(f){return f.type==CKEDITOR.NODE_ELEMENT&&f.is("ul")},iFrameItem=function(f){return f.type==CKEDITOR.NODE_ELEMENT&&f.is("iframe")};Array.prototype.pushUnique=function(f){var k;for(k=0;k<this.length;k+=1)if(this[k][0]==f[0])return-1;return this.push(f),this.length-1};Array.prototype.updateVal=function(f,k){var l;for(l=0;l<this.length;l+=1)if(this[l][0]==f)return this[l]=[f,k],!0;return this[l]=[f,k],!1};
Array.prototype.getVal=function(f){var k;for(k=0;k<this.length;k+=1)if(this[k][0]==f)return this[k][1];return null};
CKEDITOR.dialog.add("slideshowDialog",function(f){function k(b,a,c,e,d){b=h(b);var f;return f=e?e.createElement("OPTION"):document.createElement("OPTION"),!(!b||!f||"option"!=f.getName())&&(CKEDITOR.env.ie?(isNaN(parseInt(d,10))?b.$.options.add(f.$):b.$.options.add(f.$,d),f.$.innerHTML=0<a.length?a:"",f.$.value=c):(null!==d&&d<b.getChildCount()?b.getChild(0>d?0:d).insertBeforeMe(f):b.append(f),f.setText(0<a.length?a:""),f.setValue(c)),f)}function l(b){return b=h(b),b?b.$.selectedIndex:-1}function t(b,
a){if(b=h(b),0>a)return null;var c=b.getChildren().count();return b.$.selectedIndex=a>=c?c-1:a,b}function h(b){return b&&b.domId&&b.getInputElement().$?b.getInputElement():!(!b||!b.$)&&b}function n(b){1!=b.openCloseStep&&(b.getContentElement("slideshowinfoid","framepreviewid").isVisible()?y(b):w(b))}function r(b){b=b.getContentElement("slideshowinfoid","imglistitemsid");return l(b)}function w(b){var a=b.getContentElement("slideshowinfoid","imglistitemsid"),a=l(a),c=b.imagesList[a],a=b.getContentElement("slideshowinfoid",
"imgtitleid"),a=h(a);a.setValue(c[1]);a=b.getContentElement("slideshowinfoid","imgdescid");a=h(a);a.setValue(c[2]);a=b.getContentElement("slideshowinfoid","imgpreviewid");a=h(a);a.setHtml('\x3cdiv style\x3d"text-align:center;"\x3e \x3cimg src\x3d"'+c[0]+'" title\x3d"'+c[1]+'" alt\x3d"'+c[2]+'" style\x3d" max-height: 200px;  max-width: 350px;"\x3e \x3c/div\x3e');a=b.getContentElement("slideshowinfoid","framepreviewid");b=b.getContentElement("slideshowinfoid","imgparamsid");a=h(a);a.hide();b=h(b);b.show()}
function z(b,a){var c=b.getContentElement("slideshowinfoid","imglistitemsid"),c=h(c),e=l(c);if(1!=c.getChildren().count()&&!(-1==a&&0==e||1==a&&e==c.getChildren().count()-1)){var d=c,f=b.getParentEditor().document,d=h(d),c=l(d);if(!(0>c)&&(e=c+a,e=0>e?0:e,e=e>=d.getChildCount()?d.getChildCount()-1:e,c!=e)){var g=/(^IMG_\d+)/,q=d.getChild(e),u=q.getText(),n=q.getValue(),u=u.replace(g,"IMG_"+c);var q=d,m=e;(q=h(q),0>m)||(q=q.getChild(m),q.setText(u),q.setValue(n));q=d.getChild(c);u=q.getText();n=q.getValue();
q.remove();u=u.replace(g,"IMG_"+e);k(d,u,n,f?f:null,e);t(d,e);d=b.imagesList[c];b.imagesList[c]=b.imagesList[e];b.imagesList[e]=d}A(b)}}function y(b){var a=b.getContentElement("slideshowinfoid","framepreviewid"),c=b.getContentElement("slideshowinfoid","imgparamsid"),c=h(c);c.hide();a=h(a);a.show();A(b)}function A(b){var a=300;if(1==b.params.getVal("showthumbid")?a-=120:1==b.params.getVal("showcontrolid")&&(a-=30),0!=b.imagesList.length){var c=b.getContentElement("slideshowinfoid","imglistitemsid"),
e=l(c);0>e&&(e=0);var c=b.getContentElement("slideshowinfoid","framepreviewid"),d="",f='\x3cscript src\x3d"'+SCRIPT_JQUERY+'" type\x3d"text/javascript"\x3e\x3c/script\x3e',d=d+"\x3chead\x3e",d=d+f,d=d+('\x3cscript type\x3d"text/javascript" src\x3d"'+SCRIPT_ADDGAL+'"\x3e\x3c/script\x3e'),d=d+('\x3clink rel\x3d"stylesheet" type\x3d"text/css" href\x3d"'+CSS_ADDGAL+'" /\x3e');1==b.params.getVal("openOnClickId")&&(d+='\x3clink rel\x3d"stylesheet" type\x3d"text/css" href\x3d"'+CSS_FANCYBOX+'" /\x3e',d+=
'\x3cscript type\x3d"text/javascript" src\x3d"'+SCRIPT_FANCYBOX+'"\x3e\x3c/script\x3e',d+='\x3cscript type\x3d"text/javascript"\x3e',d+=B(b),d+="\x3c/script\x3e");d+='\x3cscript type\x3d"text/javascript"\x3e';d+=C(b,e,436,a);d+="\x3c/script\x3e";d+="\x3c/head\x3e";d+="\x3cbody\x3e";e=D(b);d+=e.getOuterHtml();d+="\x3c/body\x3e";d+="";c=h(c);(e=c.getFirst(iFrameItem))&&e.remove();var g=null;1==b.params.getVal("showthumbid")?a+=120:1==b.params.getVal("showcontrolid")&&(a+=30);b=CKEDITOR.dom.element.createFromHtml('\x3ciframe style\x3d"width:496px;height:'+
a+'px;background:azure; " class\x3d"cke_pasteframe" frameborder\x3d"10"  allowTransparency\x3d"false" role\x3d"region" scrolling\x3d"no"\x3e\x3c/iframe\x3e');b.setAttribute("name","totoFrame");b.setAttribute("id","totoFrame");b.on("load",function(a){if(null==g){g=this.$;var b;g.contentDocument?b=g.contentDocument:g.contentWindow&&(b=g.contentWindow.document);b?(a=b,b=d,a.open(),a.writeln(b),a.close()):alert("Cannot inject dynamic contents into iframe.")}});c.append(b)}}function p(){var b=this.getDialog();
if(b.newSlideShowMode)b.slideshowDOM.setAttribute("data-"+this.id,this.getValue());else switch(this.type){case "checkbox":this.setValue("true"==b.slideshowDOM.getAttribute("data-"+this.id));break;case "text":this.setValue(b.slideshowDOM.getAttribute("data-"+this.id));break;case "select":this.setValue(b.slideshowDOM.getAttribute("data-"+this.id))}}function m(){var b=this.getDialog();b.params.updateVal(this.id,this.getValue());n(b)}function E(b){b.previewImage&&(b.previewImage.removeListener("load",
x),b.previewImage.removeListener("error",v),b.previewImage.removeListener("abort",v),b.previewImage.remove(),b.previewImage=null);b.imagesList=null;b.params=null;b.slideshowDOM=null;for(var a=b.getContentElement("slideshowinfoid","imglistitemsid"),a=h(a);a.getChild(0)&&a.getChild(0).remove(););b.openCloseStep=!1}function F(b){for(var a="";a.length<b;)a+=Math.random().toString(36).substring(2);return a.substring(0,b)}function C(b,a,c,e){var d="ad-gallery_"+b.params.getVal("slideshowid"),f,k="";f="(function($) {$(function() {";
0==e&&(e=b.params.getVal("pictheightid"));0==c&&(c="false");0==b.params.getVal("showtitleid")&&(k=",  hooks: { displayDescription: function(image) {}}");a="loader_image: '"+pluginPath+"3rdParty/ad-gallery/loader.gif', width:"+c+", height:"+e+", start_at_index: "+a+", animation_speed: "+b.params.getVal("animspeedid")+k+", update_window_hash: false, effect: '"+b.params.getVal("transitiontypeid")+"',";b=" slideshow: { enable: true, autostart: "+b.params.getVal("autostartid")+", start_label: '"+g.labelStart+
"', stop_label: '"+g.labelStop+"', speed: "+1E3*b.params.getVal("speedid")+"}";return f+="   var galleries \x3d $('#"+d+"').adGallery({"+a+b+"});",f+="});",f+"})(jQuery);"}function B(b){b="ad-gallery_"+b.params.getVal("slideshowid");var a="(function($) {";return a+="$(function() {",a+='$("#'+b+'").on("click",".ad-image",function(){',a+='var imgObj \x3d$(this).find("img");',a+='var isrc\x3dimgObj.attr("src");',a+="var ititle\x3dnull;",a+="var idesc\x3dnull;",a+="var iname\x3disrc.split('/');",a+="iname\x3diname[iname.length-1];",
a+='var imgdescid\x3d$(this).find(".ad-image-description");',a+="if(imgdescid){",a+='ititle\x3d$(this).find(".ad-description-title");',a+="if(ititle)ititle\x3dititle.text();",a+="if(ititle!\x3d'')ititle\x3d'\x3cbig\x3e'+ititle+'\x3c/big\x3e';",a+='idesc\x3d$(this).find("span");',a+="if(idesc)idesc\x3didesc.text();",a+="if (idesc.indexOf('IMAGE_LINK_') \x3e\x3d 0) {",a+="idesc \x3d '';",a+="}",a+="if(idesc!\x3d''){",a+="if(ititle!\x3d'')ititle\x3dititle+'\x3cbr\x3e';",a+="idesc\x3d'\x3ci\x3e'+idesc+'\x3c/i\x3e';",
a+="}",a+="}",a+="$.fancybox.open({",a+="href:isrc,",a+="beforeLoad:function(){",a+="this.title\x3dititle+idesc;",a+="},",a+="});",a+="});",a+="});",a+"})(jQuery);"}function G(b){b="ad-gallery_"+b.params.getVal("slideshowid");var a="(function($) {";return a+="$(function() {",a+='$("#'+b+'").on("click",".ad-image",function(){',a+='var imgObj \x3d$(this).find("img");',a+='var isrc\x3dimgObj.attr("src");',a+="var ititle\x3dnull;",a+="var idesc\x3dnull;",a+="var iname\x3disrc.split('/');",a+="iname\x3diname[iname.length-1];",
a+='var imgdescid\x3d$(this).find(".ad-image-description");',a+="if(imgdescid){",a+='ititle\x3d$(this).find(".ad-description-title");',a+="if(ititle)ititle\x3dititle.text();",a+='idesc\x3d$(this).find("span");',a+="if(idesc)idesc\x3didesc.text();",a+="if(idesc!\x3d''){",a+="var url\x3dwindow.location.href.trim();",a+="if (idesc.indexOf('IMAGE_LINK_TAB:') \x3e\x3d 0) {",a+="\tidesc \x3d idesc.substring(15).trim();",a+=" if (url !\x3d idesc) window.open(idesc,'_blank');",a+="} else if (idesc.indexOf('IMAGE_LINK_PAR:') \x3e\x3d 0) {",
a+="\tidesc \x3d idesc.substring(15).trim();",a+=" if (url !\x3d idesc) window.open(idesc,'_self');",a+="}",a+="}",a+="}",a+="});",a+="});",a+"})(jQuery);"}function D(b){var a=b.params.getVal("slideshowid"),c="ad-gallery_"+a,e="display: block;",d="display: block;";0==b.params.getVal("showthumbid")&&(e="display: none;");0==b.params.getVal("showcontrolid")&&(d="visibility: hidden;");var g=f.document.createElement("div");g.setAttribute("id",a);g.setAttribute("class","slideshowPlugin");g.setAttribute("contenteditable",
"false");a=g.append("div");a.setAttribute("class","ad-gallery");a.setAttribute("contenteditable","false");a.setAttribute("id",c);c=a.append("div");c.setAttribute("class","ad-image-wrapper");c.setAttribute("contenteditable","false");c=a.append("div");c.setAttribute("class","ad-controls");c.setAttribute("contenteditable","false");c.setAttribute("style",d);d=a.append("div");d.setAttribute("class","ad-nav");d.setAttribute("style",e);d.setAttribute("contenteditable","false");e=d.append("div");e.setAttribute("class",
"ad-thumbs");e.setAttribute("contenteditable","false");e=e.append("ul");e.setAttribute("class","ad-thumb-list");e.setAttribute("contenteditable","false");for(d=0;d<b.imagesList.length;d+=1)a=e.append("li"),a.setAttribute("contenteditable","false"),a=a.append("a"),a.setAttribute("href",removeDomainFromUrl(b.imagesList[d][IMG_PARAM.URL])),a.setAttribute("contenteditable","false"),a=a.append("img"),a.setAttribute("src",removeDomainFromUrl(b.imagesList[d][IMG_PARAM.URL])),a.setAttribute("title",b.imagesList[d][IMG_PARAM.TITLE]),
a.setAttribute("alt",b.imagesList[d][IMG_PARAM.ALT]),a.setAttribute("contenteditable","false"),a.setAttribute("width",b.imagesList[d][IMG_PARAM.WIDTH]),a.setAttribute("height",b.imagesList[d][IMG_PARAM.HEIGHT]);return g}var g=f.lang.slideshow,x=function(){var b=this.previewImage;b.removeListener("load",x);b.removeListener("error",v);b.removeListener("abort",v);b=BASE_PATH+"plugins/slideshow/images/placeholder.png";1==this.imagesList.length&&this.imagesList[0][IMG_PARAM.URL]==b&&(b=this.getContentElement("slideshowinfoid",
"imglistitemsid"),b=h(b),this.imagesList.splice(0,1),b.getChild(0).remove());var a=this.previewImage,b=a.$.src,c=a.$.width/a.$.height,e=a=50;1<c?e/=c:a*=c;c=this.getContentElement("slideshowinfoid","imglistitemsid");a=this.imagesList.pushUnique([b,"","",a.toFixed(0),e.toFixed(0)]);0<=a&&(k(c,"IMG_"+a+" : "+b.substring(b.lastIndexOf("/")+1),b,this.getParentEditor().document),t(c,a),n(this))},v=function(){var b=this.previewImage;b.removeListener("load",x);b.removeListener("error",v);b.removeListener("abort",
v)};return{title:g.dialogTitle,width:500,height:600,resizable:CKEDITOR.DIALOG_RESIZE_NONE,buttons:[CKEDITOR.dialog.okButton(f,{label:"OkCK",style:"display:none;"}),CKEDITOR.dialog.cancelButton,{id:"myokbtnid",type:"button",label:"OK",title:g.validModif,accessKey:"C",disabled:!1,onClick:function(){var b=this.getDialog(),a={};b.openCloseStep=!0;b.commitContent(b);var c,e=D(b);for(c=0;c<b.params.length;c+=1)e.data(b.params[c][0],b.params[c][1]);f.config.slideshowDoNotLoadJquery&&1==f.config.slideshowDoNotLoadJquery||
(c=CKEDITOR.document.createElement("script",{attributes:{type:"text/javascript",src:SCRIPT_JQUERY}}),e.append(c));c=CKEDITOR.document.createElement("script",{attributes:{type:"text/javascript",src:SCRIPT_ADDGAL}});if(e.append(c),1==b.params.getVal("openOnClickId"))f.config.slideshowDoNotLoadFancyBoxCss&&1==f.config.slideshowDoNotLoadFancyBoxCss||(c=CKEDITOR.document.createElement("script",{attributes:{type:"text/javascript"}}),c.setText("(function($) { $('head').append('\x3clink rel\x3d\"stylesheet\" href\x3d\""+
CSS_FANCYBOX+'" type\x3d"text/css" /\x3e\'); })(jQuery);'),e.append(c)),f.config.slideshowDoNotLoadFancyBoxScript&&1==f.config.slideshowDoNotLoadFancyBoxScript||(c=CKEDITOR.document.createElement("script",{attributes:{type:"text/javascript",src:SCRIPT_FANCYBOX}}),e.append(c)),c=CKEDITOR.document.createElement("script",{attributes:{type:"text/javascript"}}),c.setText(B(b)),e.append(c);c=CKEDITOR.document.createElement("script",{attributes:{type:"text/javascript"}});c.setText(G(b));e.append(c);c=CKEDITOR.document.createElement("script",
{attributes:{type:"text/javascript"}});c.setText("(function($) { $('head').append('\x3clink rel\x3d\"stylesheet\" href\x3d\""+CSS_ADDGAL+'" type\x3d"text/css" /\x3e\'); })(jQuery);');e.append(c);c=CKEDITOR.document.createElement("script",{attributes:{type:"text/javascript"}});c.setText(C(b,0,0,0));e.append(c);b.imagesList.length&&(a.backgroundImage='url("'+b.imagesList[0][IMG_PARAM.URL]+'")');a.backgroundSize="contain";a.backgroundRepeat="no-repeat";a.backgroundPosition="center";a.display="block";
a.width="64px";a.height="64px";a.border="1px solid black";e=f.createFakeElement(e,"cke_slideShow","slideShow",!1);e.setAttributes({});e.setStyles(a);b.fakeImage?(e.replace(b.fakeImage),f.getSelection().selectElement(e)):f.insertElement(e);E(b);b.hide()}}],contents:[{id:"slideshowinfoid",label:"Basic Settings",align:"center",elements:[{type:"text",id:"id",style:"display:none;",onLoad:function(){this.getInputElement().setAttribute("readOnly",!0)}},{type:"text",id:"txturlid",style:"display:none;",label:g.imgList,
onChange:function(){var b=this.getDialog(),a=this.getValue();if(0<a.length){var c=b.previewImage;c.on("load",x,b);c.on("error",v,b);c.on("abort",v,b);c.setAttribute("src",a)}}},{type:"button",id:"browse",hidden:"true",style:"display:inline-block;margin-top:0px;",filebrowser:{action:"Browse",target:"slideshowinfoid:txturlid",url:f.config.filebrowserImageBrowseUrl||f.config.filebrowserBrowseUrl},label:g.imgAdd},{type:"vbox",align:"center",children:[{type:"html",align:"center",id:"framepreviewtitleid",
style:"font-family: Amaranth; color: #1E66EB;\tfont-size: 20px; font-weight: bold;",html:g.previewMode},{type:"html",id:"framepreviewid",align:"center",style:"width:500px;height:320px",html:""},{type:"hbox",id:"imgparamsid",style:"display:none;width:500px;",height:"325px",children:[{type:"vbox",align:"center",width:"400px",children:[{type:"text",id:"imgtitleid",label:g.imgTitle,onChange:function(){var b=this.getDialog(),a=this.getValue();b.imagesList[r(b)][IMG_PARAM.TITLE]=a;w(b)},onBlur:function(){var b=
this.getDialog(),a=this.getValue();b.imagesList[r(b)][IMG_PARAM.TITLE]=a;w(b)}},{type:"text",id:"imgdescid",label:g.imgDesc,onChange:function(){var b=this.getDialog(),a=this.getValue();b.imagesList[r(b)][IMG_PARAM.ALT]=a;w(b)},onBlur:function(){var b=this.getDialog(),a=this.getValue();b.imagesList[r(b)][IMG_PARAM.ALT]=a;w(b)}},{type:"html",id:"imgpreviewid",style:"width:400px;height:200px;",html:"\x3cdiv\x3exx\x3c/div\x3e"}]}]},{type:"hbox",align:"center",height:110,widths:["25%","50%"],children:[{type:"vbox",
children:[{type:"checkbox",id:"autostartid",label:g.autoStart,"default":"checked",style:"margin-top:15px;",onChange:m,commit:m,setup:p},{type:"checkbox",id:"showtitleid",label:g.showTitle,"default":"checked",onChange:m,commit:m,setup:p},{type:"checkbox",id:"showcontrolid",label:g.showControls,"default":"checked",onChange:m,commit:m,setup:p},{type:"checkbox",id:"showthumbid",label:g.showThumbs,"default":"checked",onChange:m,commit:m,setup:p},{type:"checkbox",id:"openOnClickId",label:g.openOnClick,
"default":"checked",onChange:m,commit:m,setup:p}]},{type:"select",id:"imglistitemsid",label:g.picturesList,multiple:!1,style:"height:125px;width:250px",items:[],onChange:function(b){b=this;var a=b.getDialog();b=h(b);var c,e,d=0;for(c=0;c<b.getChildren().count();c+=1)if(e=b.getChild(c),e.$.selected){d=c;break}t(b,d);n(a)}},{type:"vbox",children:[{type:"button",id:"previewbtn",style:"margin-top:15px;margin-left:25px;",label:g.previewMode,onClick:function(){y(this.getDialog())}},{type:"button",id:"removeselectedbtn",
style:"margin-left:25px;",label:g.imgDelete,onClick:function(){var b=this.getDialog(),a=b.getContentElement("slideshowinfoid","imglistitemsid"),a=h(a),c,e=!1;for(c=a.getChildren().count()-1;0<=c;c--)a.getChild(c).$.selected&&(b.imagesList.splice(c,1),a.getChild(c).remove(),e=!0);e&&(0==b.imagesList.length&&(c=BASE_PATH+"plugins/slideshow/images/placeholder.png",k(a,"IMG_0 : "+c.substring(c.lastIndexOf("/")+1),c,b.getParentEditor().document),b.imagesList.pushUnique([c,g.imgTitle,g.imgDesc,"50","50"])),
t(a,0),n(b))}},{type:"button",id:"editselectedbtn",style:"margin-left:25px;",label:g.imgEdit,onClick:function(){w(this.getDialog())}},{type:"hbox",children:[{type:"button",id:"upselectedbtn",style:"width:32px; margin-left:25px;",label:g.arrowUp,onClick:function(){z(this.getDialog(),-1)}},{type:"button",id:"downselectedbtn",style:"width:32px;",label:g.arrowDown,onClick:function(){z(this.getDialog(),1)}}]}]}]},{type:"hbox",children:[{type:"text",id:"pictheightid",label:g.pictHeight,maxLength:3,style:"width:100px;",
"default":"300",onChange:function(b){0==/^\d+$/.test(this.getValue())&&this.setValue(300);this.getDialog().params.updateVal(this.id,this.getValue());n(this.getDialog())},commit:m,setup:p},{type:"text",id:"speedid",label:g.displayTime,maxLength:3,style:"width:100px;","default":"5",onChange:function(b){0==/^\d+$/.test(this.getValue())&&this.setValue(5);this.getDialog().params.updateVal(this.id,this.getValue());n(this.getDialog())},commit:m,setup:p},{type:"text",id:"animspeedid",label:g.transitionTime,
style:"width:100px;",maxLength:4,"default":"500",onChange:function(b){0==/^\d+$/.test(this.getValue())&&this.setValue(500);this.getDialog().params.updateVal(this.id,this.getValue());n(this.getDialog())},commit:m,setup:p},{type:"select",id:"transitiontypeid",label:g.transition,items:[[g.tr1,"none"],[g.tr2,"resize"],[g.tr3,"slide-vert"],[g.tr4,"slide-hori"],[g.tr5,"fade"]],"default":"resize",style:"width:100px;",commit:m,setup:p,onChange:m}]}]}]}],onLoad:function(){},onShow:function(){this.dialog=this;
this.slideshowDOM=null;this.openCloseStep=!0;var b=this.fakeImage=null;this.imagesList=[];this.params=[];this.previewImage=f.document.createElement("img");this.okRefresh=!0;var a=this.getSelectedElement();if(a&&a.data("cke-real-element-type")&&"slideShow"==a.data("cke-real-element-type")&&(this.fakeImage=a,b=f.restoreRealElement(a)),b){this.slideshowDOM=b;a=b.getElementsByTag("ul");a=null==a?null:1==a.count()?a.getItem(0):null;if(null==a)return alert("BIG Problem slideShowContainer !!"),!1;var c=
b.getAttribute("id");if(null==c)return alert("BIG Problem slideshowid !!"),!1;this.params.push(["slideshowid",c]);for(var e,d,h,l,m,u=a.$.getElementsByTagName("img"),r=this.getContentElement("slideshowinfoid","imglistitemsid"),a=0;a<u.length;a+=1)e=u[a],c=e.src,d=e.width,0==d&&(d=e.naturalWidth),0==d?(d=50,h=50):(h=e.height,0==h&&(h=e.naturalHeight),0==h&&(d=50,h=50)),d/=h,m=l=50,1<d?m/=d:l*=d,e=this.imagesList.pushUnique([c,e.title,e.alt,l,m]),0<=e&&k(r,"IMG_"+e+" : "+c.substring(c.lastIndexOf("/")+
1),c,this.getParentEditor().document);t(r,0);n(this);var p,b=b.$.dataset;for(p in b)this.params.push([p,b[p]]);this.setupContent(this,!0);this.newSlideShowMode=!1}else this.params.push(["slideshowid","cke_"+F(8)+"_slideShow"]),p=this.getContentElement("slideshowinfoid","imglistitemsid"),b=BASE_PATH+"plugins/slideshow/images/placeholder.png",k(p,"IMG_0 : "+b.substring(b.lastIndexOf("/")+1),b,this.getParentEditor().document),this.imagesList.pushUnique([b,g.imgTitle,g.imgDesc,"50","50"]),t(p,0),n(this),
this.commitContent(this);this.openCloseStep=!1;y(this)},onOk:function(){return!1},onHide:function(){E(this)}}});